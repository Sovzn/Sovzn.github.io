<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="Sovzn"><meta name="copyright" content="Sovzn"><meta name="generator" content="Hexo 5.3.0"><meta name="theme" content="hexo-theme-yun"><title>Gateway | å¤§å¸ˆå…„</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.22/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"sovzn.github.io","root":"/","title":"å¤§å¸ˆå…„çš„å°ç ´ç«™","version":"1.3.0","mode":"auto","copycode":true,"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="ç½‘å…³ ç½‘å…³ï¼š ç½‘å…³ &#x3D;  è·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨   ç½‘å…³ç»Ÿä¸€æœåŠ¡å…¥å£ï¼Œå¯æ–¹ä¾¿å®ç°å¯¹å¹³å°ä¼—å¤šæœåŠ¡æ¥å£è¿›è¡Œç®¡æ§ ï¼Œå¯¹è®¿é—®æœåŠ¡çš„èº«ä»½è®¤è¯ã€é˜²æŠ¥æ–‡é‡æ”¾ä¸é˜²æ•°æ®ç¯¡æ”¹ã€åŠŸèƒ½è°ƒç”¨çš„ä¸šåŠ¡é‰´æƒã€å“åº”æ•°æ®çš„è„±æ•ã€æµé‡ä¸å¹¶å‘æ§åˆ¶ï¼Œç”šè‡³åŸºäºAPIè°ƒç”¨çš„è®¡é‡æˆ–è€…è®¡è´¹ç­‰ç­‰ã€‚     ç½‘å…³çš„ä½œç”¨ï¼š   1.ç½‘å…³å¯ä»¥å®ç°æœåŠ¡çš„ç»Ÿä¸€ç®¡ç† 2.ç½‘å…³å¯ä»¥è§£å†³å¾®æœåŠ¡ä¸­é€šç”¨ä»£ç çš„å†—ä½™é—®é¢˜(å¦‚æƒé™æ§åˆ¶,ç›¸åº”æ•°æ®çš„è„±æ•ï¼Œæµé‡ç›‘æ§,é™æµï¼ŒåŸºäºA">
<meta property="og:type" content="article">
<meta property="og:title" content="Gateway">
<meta property="og:url" content="http://sovzn.github.io/2021/09/12/Gateway/index.html">
<meta property="og:site_name" content="å¤§å¸ˆå…„">
<meta property="og:description" content="ç½‘å…³ ç½‘å…³ï¼š ç½‘å…³ &#x3D;  è·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨   ç½‘å…³ç»Ÿä¸€æœåŠ¡å…¥å£ï¼Œå¯æ–¹ä¾¿å®ç°å¯¹å¹³å°ä¼—å¤šæœåŠ¡æ¥å£è¿›è¡Œç®¡æ§ ï¼Œå¯¹è®¿é—®æœåŠ¡çš„èº«ä»½è®¤è¯ã€é˜²æŠ¥æ–‡é‡æ”¾ä¸é˜²æ•°æ®ç¯¡æ”¹ã€åŠŸèƒ½è°ƒç”¨çš„ä¸šåŠ¡é‰´æƒã€å“åº”æ•°æ®çš„è„±æ•ã€æµé‡ä¸å¹¶å‘æ§åˆ¶ï¼Œç”šè‡³åŸºäºAPIè°ƒç”¨çš„è®¡é‡æˆ–è€…è®¡è´¹ç­‰ç­‰ã€‚     ç½‘å…³çš„ä½œç”¨ï¼š   1.ç½‘å…³å¯ä»¥å®ç°æœåŠ¡çš„ç»Ÿä¸€ç®¡ç† 2.ç½‘å…³å¯ä»¥è§£å†³å¾®æœåŠ¡ä¸­é€šç”¨ä»£ç çš„å†—ä½™é—®é¢˜(å¦‚æƒé™æ§åˆ¶,ç›¸åº”æ•°æ®çš„è„±æ•ï¼Œæµé‡ç›‘æ§,é™æµï¼ŒåŸºäºA">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912212725346.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912214828321.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912215520756.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912220637158.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912220734781.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210913212605265.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210913214820464.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210920201049470.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021092020371497.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210920204027332.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210920210446593.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210920211803396.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210920211648321.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210912220637158.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210921101725101.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210921101829381.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210921102817274.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210921111222331.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021092111140913.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==">
<meta property="article:published_time" content="2021-09-12T12:13:19.000Z">
<meta property="article:modified_time" content="2021-09-21T10:57:05.413Z">
<meta property="article:author" content="Sovzn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20210912212725346.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Sovzn"><img width="96" loading="lazy" src="/Yun.png" alt="Sovzn"><span class="site-author-status" title="æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ">ğŸ˜Š</span></a><div class="site-author-name"><a href="/about/">Sovzn</a></div><a class="site-name" href="/about/site.html">å¤§å¸ˆå…„</a><sub class="site-subtitle"></sub><div class="site-desciption">æˆ‘åªæ‹¥æœ‰ä½ çš„æœˆå…‰,æˆ‘è¦æŠŠå®ƒå½“ä½œéª„é˜³ã€‚</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">87</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">30</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">18</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="å¾®åš" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="è±†ç“£" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/null" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E5%85%B3"><span class="toc-number">1.</span> <span class="toc-text">ç½‘å…³</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E5%85%B3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">ç½‘å…³çš„ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%BD%91%E5%85%B3%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">2.1.</span> <span class="toc-text">å¼€å‘ç½‘å…³åŠ¨æ€è·¯ç”±</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">2.1.1.</span> <span class="toc-text">Javaæ–¹å¼é…ç½®è·¯ç”±ï¼ˆäº†è§£ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%85%B3%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%86%E8%8A%82"><span class="toc-number">2.1.2.</span> <span class="toc-text">ç½‘å…³çš„é…ç½®ç»†èŠ‚</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E5%85%B3%E7%9A%84%E6%96%AD%E8%A8%80%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">2.2.</span> <span class="toc-text">ç½‘å…³çš„æ–­è¨€å’Œè¿‡æ»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%AD%E8%A8%80"><span class="toc-number">2.2.1.</span> <span class="toc-text">å¸¸ç”¨çš„æ–­è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#After"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">- After</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cookie"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">- cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Header"><span class="toc-number">2.2.1.3.</span> <span class="toc-text">- Header</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Method"><span class="toc-number">2.2.1.4.</span> <span class="toc-text">- Method</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84Filter"><span class="toc-number">2.2.2.</span> <span class="toc-text">å¸¸ç”¨çš„Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AEFilter"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">å†…ç½®Filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80Filter"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">è‡ªå®šä¹‰å…¨å±€Filter</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://Sovzn.github.io/2021/09/12/Gateway/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Sovzn"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å¤§å¸ˆå…„"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Gateway</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2021-09-12 20:13:19" itemprop="dateCreated datePublished" datetime="2021-09-12T20:13:19+08:00">2021-09-12</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2021-09-21 18:57:05" itemprop="dateModified" datetime="2021-09-21T18:57:05+08:00">2021-09-21</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Spring/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Spring</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Spring/SpringCloud/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">SpringCloud</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><h1 id="ç½‘å…³"><a href="#ç½‘å…³" class="headerlink" title="ç½‘å…³"></a>ç½‘å…³</h1><blockquote>
<p><strong>ç½‘å…³ï¼š</strong></p>
<p>ç½‘å…³ =  è·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨</p>
</blockquote>
<p><font color='red'> ç½‘å…³ç»Ÿä¸€æœåŠ¡å…¥å£ï¼Œå¯æ–¹ä¾¿å®ç°å¯¹å¹³å°ä¼—å¤šæœåŠ¡æ¥å£è¿›è¡Œç®¡æ§ </font>ï¼Œå¯¹è®¿é—®æœåŠ¡çš„èº«ä»½è®¤è¯ã€é˜²æŠ¥æ–‡é‡æ”¾ä¸é˜²æ•°æ®ç¯¡æ”¹ã€åŠŸèƒ½è°ƒç”¨çš„ä¸šåŠ¡é‰´æƒã€å“åº”æ•°æ®çš„è„±æ•ã€æµé‡ä¸å¹¶å‘æ§åˆ¶ï¼Œç”šè‡³åŸºäºAPIè°ƒç”¨çš„è®¡é‡æˆ–è€…è®¡è´¹ç­‰ç­‰ã€‚</p>
<p> <img src="https://img-blog.csdnimg.cn/20210912212725346.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<blockquote>
<p>ç½‘å…³çš„ä½œç”¨ï¼š</p>
</blockquote>
<ul>
<li>1.ç½‘å…³å¯ä»¥å®ç°æœåŠ¡çš„ç»Ÿä¸€ç®¡ç†</li>
<li>2.ç½‘å…³å¯ä»¥è§£å†³å¾®æœåŠ¡ä¸­é€šç”¨ä»£ç çš„å†—ä½™é—®é¢˜(å¦‚æƒé™æ§åˆ¶,ç›¸åº”æ•°æ®çš„è„±æ•ï¼Œæµé‡ç›‘æ§,é™æµï¼ŒåŸºäºAPIè°ƒç”¨çš„è®¡é‡å’Œè®¡è´¹ç­‰)</li>
</ul>
<blockquote>
<p>å¸¸ç”¨çš„ç½‘å…³ç»„ä»¶ï¼š</p>
</blockquote>
<p><strong>1.zuul</strong></p>
<p>zuulæ˜¯ä»è®¾å¤‡å’Œç½‘ç«™åˆ°Netflixæµåª’ä½“åº”ç”¨ç¨‹åºåç«¯çš„æ‰€æœ‰è¯·æ±‚çš„å‰é—¨ã€‚ä½œä¸ºä¸€ä¸ªè¾¹ç¼˜æœåŠ¡åº”ç”¨ç¨‹åºï¼Œzulè¢«æ„å»ºä¸ºæ”¯æŒåŠ¨æ€è·¯ç”±ã€ç›‘è§†ã€å¼¹æ€§å’Œå®‰å…¨æ€§ã€‚</p>
<p><font color='red'>ç›®å‰zuulç»„ä»¶å·²ç»ä»1.0æ›´æ–°åˆ°2.0ï¼Œä½†æ˜¯ä½œä¸ºspringcloudå®˜æ–¹ä¸å†æ¨èä½¿ç”¨zuul2.0ï¼Œä½†æ˜¯ä¾ç„¶æ”¯æŒzuul2.</font></p>
<p><strong>2.Gateway</strong></p>
<p>æä¾›äº†ä¸€ä¸ªåœ¨springmvcä¹‹ä¸Šæ„å»ºAPIç½‘å…³çš„åº“ã€‚springcloudgatewayæ—¨åœ¨æä¾›ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•æ¥è·¯ç”±åˆ°apiï¼Œå¹¶ä¸ºapiæä¾›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œæ¯”å¦‚ï¼šå®‰å…¨æ€§ã€ç›‘æ§/åº¦é‡å’Œå¼¹æ€§ã€‚</p>
<p>Gatewayå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>åŸºäºspringboot2.x å’Œ <strong>spring webFlux å’Œ Reactor æ„å»º</strong> å“åº”å¼å¼‚æ­¥éé˜»å¡IOæ¨¡å‹</li>
<li>åŠ¨æ€è·¯ç”±</li>
<li>è¯·æ±‚è¿‡æ»¤</li>
</ul>
<h1 id="ç½‘å…³çš„ä½¿ç”¨"><a href="#ç½‘å…³çš„ä½¿ç”¨" class="headerlink" title="ç½‘å…³çš„ä½¿ç”¨"></a>ç½‘å…³çš„ä½¿ç”¨</h1><p>ç½‘å…³æœåŠ¡æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„SpringBootåº”ç”¨</p>
<h2 id="å¼€å‘ç½‘å…³åŠ¨æ€è·¯ç”±"><a href="#å¼€å‘ç½‘å…³åŠ¨æ€è·¯ç”±" class="headerlink" title="å¼€å‘ç½‘å…³åŠ¨æ€è·¯ç”±"></a>å¼€å‘ç½‘å…³åŠ¨æ€è·¯ç”±</h2><blockquote>
<p><strong>1.å¼•å…¥gatewayç½‘å…³ä¾èµ–ï¼š</strong></p>
<p>æ³¨æ„ï¼šä¸ç”¨å¼•å…¥springboot-starter-webï¼Œå› ä¸ºgatewayä¸ºäº†æ•ˆç‡ä½¿ç”¨webfluxè¿›è¡Œå¼‚æ­¥éé˜»å¡æ¨¡å‹çš„å®ç°,webfluxä¹Ÿæ˜¯ä¸€ç§webæ¨¡å‹ï¼Œå¦‚æœå› æ—¥springboot-starter-webï¼Œä¼šäº§ç”Ÿå†²çªï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p>
</blockquote>
<p> <img src="https://img-blog.csdnimg.cn/20210912214828321.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¼•å…¥springboot ç½‘å…³ä¸­ä¸èƒ½ä½¿ç”¨springmvc çš„webæ¨¡å‹--></span>
   <span class="token comment">&lt;!--&lt;dependency>--></span>
   <span class="token comment">&lt;!--&lt;groupId>org.springframework.boot&lt;/groupId>--></span>
   <span class="token comment">&lt;!--&lt;artifactId>spring-boot-starter-web&lt;/artifactId>--></span>
   <span class="token comment">&lt;!--&lt;/dependency>--></span>

   <span class="token comment">&lt;!--å¼•å…¥consul--></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
   <span class="token comment">&lt;!--å¼•å…¥actuator--></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
   <span class="token comment">&lt;!--å¼•å…¥gateway--></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>2.ç¼–å†™ç½‘å…³é…ç½®ï¼š</strong></p>
</blockquote>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:
  port: 7979
spring:
  application:
    name: GATEWAY
  cloud:
    consul:
      host: localhost
      port: 8500
    gateway:
      routes:
        - id: product_router #è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†
          uri: http:&#x2F;&#x2F;localhost:8799 #å•†å“æœåŠ¡åœ°å€  
          predicates:  #æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™
            - Path&#x3D;&#x2F;product    
#-----------å½“è®¿é—®http:&#x2F;&#x2F;localhost:7979&#x2F;productæ—¶ä¼šè½¬å‘åˆ°ï¼šhttp:&#x2F;&#x2F;localhost:8799&#x2F;product

        - id: category_router #è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†
          uri: http:&#x2F;&#x2F;localhost:8787 #ç±»åˆ«æœåŠ¡åœ°å€ å¦‚ï¼š 
          predicates:  #æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™
            - Path&#x3D;&#x2F;category
            
#-----------å½“è®¿é—®http:&#x2F;&#x2F;localhost:7979&#x2F;categoryæ—¶ä¼šè½¬å‘åˆ°ï¼šhttp:&#x2F;&#x2F;localhost:8787&#x2F;category
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>3.å¯åŠ¨æœåŠ¡ï¼šç½‘å…³æœåŠ¡ï¼Œå•†å“æœåŠ¡ï¼Œç±»åˆ«æœåŠ¡</strong></p>
</blockquote>
<p>å•†å“æœåŠ¡å’Œç±»åˆ«æœåŠ¡æ¥å£å¯è§ï¼šæœåŠ¡æ³¨å†Œä¸­å¿ƒ1.3.1  â†“ <a href="http://sovzn.github.io/2021/07/27/%E6%9C%8D%E5%8A%A1%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/">http://sovzn.github.io/2021/07/27/%E6%9C%8D%E5%8A%A1%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/</a> </p>
<p> <img src="https://img-blog.csdnimg.cn/20210912215520756.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<blockquote>
<p><strong>4.æµ‹è¯•</strong></p>
</blockquote>
<p>ç›´æ¥åœ¨ç½‘å…³æœåŠ¡çš„ç«¯å£7979ä¸‹è®¿é—®/categoryå’Œ/product:</p>
<p> <img src="https://img-blog.csdnimg.cn/20210912220637158.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p> <img src="https://img-blog.csdnimg.cn/20210912220734781.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p><strong>å¯ä»¥å‘ç°æˆåŠŸè½¬å‘è‡³ç›¸åº”æœåŠ¡</strong></p>
<h3 id="Javaæ–¹å¼é…ç½®è·¯ç”±ï¼ˆäº†è§£ï¼‰"><a href="#Javaæ–¹å¼é…ç½®è·¯ç”±ï¼ˆäº†è§£ï¼‰" class="headerlink" title="Javaæ–¹å¼é…ç½®è·¯ç”±ï¼ˆäº†è§£ï¼‰"></a>Javaæ–¹å¼é…ç½®è·¯ç”±ï¼ˆäº†è§£ï¼‰</h3><p>åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼ˆä¼˜å…ˆçº§é«˜äºé€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ï¼‰ï¼Œæ•ˆæœä¸é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ä¸€æ ·ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayConfig</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//ç±»åˆ«è·¯ç”±</span>
                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"category_router"</span><span class="token punctuation">,</span> r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/category"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8787"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//å•†å“è·¯ç”±</span>
                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"product_router"</span><span class="token punctuation">,</span> r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/product"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8799"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//.....</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="ç½‘å…³çš„é…ç½®ç»†èŠ‚"><a href="#ç½‘å…³çš„é…ç½®ç»†èŠ‚" class="headerlink" title="ç½‘å…³çš„é…ç½®ç»†èŠ‚"></a>ç½‘å…³çš„é…ç½®ç»†èŠ‚</h3><p><strong>1. <code>- path</code>åå¯å†™å¤šä¸ªè·¯å¾„ï¼Œä¸”æ”¯æŒé€šé…ç¬¦å¦‚ï¼š</strong></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>//product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p> <img src="https://img-blog.csdnimg.cn/20210913212605265.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p><strong>2.é…ç½®å®ç°ç½‘å…³è¯·æ±‚è½¬å‘çš„è´Ÿè½½å‡è¡¡ï¼ŒGatewayç»„ä»¶åº•å±‚é›†æˆäº†Ribbonç»„ä»¶ã€‚</strong></p>
<p>è¯­æ³•ï¼šuri: lb://æœåŠ¡id       å…¶ä¸­lbå…¶å®å°±æ˜¯LoadBalance</p>
<p>å¦‚ï¼š</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7979</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> GATEWAY
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8799 #å•†å“æœåŠ¡åœ°å€  http://localhost:8799/product</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//PRODUCT   <span class="token comment">#PRODUCT:å•†å“æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç† </span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>/product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> category_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8787 #ç±»åˆ«æœåŠ¡åœ°å€ å¦‚ï¼š http://localhost:8787/list</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//CATEGORY   <span class="token comment">#CATEGORY:ç±»åˆ«æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç†</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/category<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>3.æŸ¥çœ‹ç½‘å…³è·¯ç”±è§„åˆ™åˆ—è¡¨</strong></p>
<p>gatewayæä¾›è·¯ç”±<font color='red'>è®¿é—®è§„åˆ™åˆ—è¡¨çš„webç•Œé¢</font>,ä½†æ˜¯é»˜è®¤æ˜¯å…³é—­çš„,å¦‚æœæƒ³è¦æŸ¥çœ‹æœåŠ¡è·¯ç”±è§„åˆ™å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ï¼š</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">"*"</span>   <span class="token comment">#å¼€å¯æ‰€æœ‰webç«¯ç‚¹æš´éœ²</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è®¿é—®è·¯ç”±ç®¡ç†åˆ—è¡¨åœ°å€:</p>
<p><font color='cornflowerblue'>http: //IP:ç½‘å…³æœåŠ¡ç«¯å£/actuator/gateway/routes</font></p>
<p> <img src="https://img-blog.csdnimg.cn/20210913214820464.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<h2 id="ç½‘å…³çš„æ–­è¨€å’Œè¿‡æ»¤"><a href="#ç½‘å…³çš„æ–­è¨€å’Œè¿‡æ»¤" class="headerlink" title="ç½‘å…³çš„æ–­è¨€å’Œè¿‡æ»¤"></a>ç½‘å…³çš„æ–­è¨€å’Œè¿‡æ»¤</h2><h3 id="å¸¸ç”¨çš„æ–­è¨€"><a href="#å¸¸ç”¨çš„æ–­è¨€" class="headerlink" title="å¸¸ç”¨çš„æ–­è¨€"></a>å¸¸ç”¨çš„æ–­è¨€</h3><p><strong>1.Gatewayæ”¯æŒå¤šç§æ–¹å¼çš„predicateï¼š</strong></p>
<p> <img src="https://img-blog.csdnimg.cn/20210920201049470.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">-</span> After=2020-07-21T11:33:33.993+08:00[Asia/Shanghai]  			`æŒ‡å®šæ—¥æœŸä¹‹åçš„è¯·æ±‚è¿›è¡Œè·¯ç”±
<span class="token list punctuation">-</span> Before=2021-09-20T20:38:55.675+08:00[Asia/Shanghai]     `æŒ‡å®šæ—¥æœŸä¹‹å‰çš„è¯·æ±‚è¿›è¡Œè·¯ç”±
<span class="token list punctuation">-</span> Between=2021-09-20T20:38:55.675+08:00[Asia/Shanghai], 2021-09-21T20:38:55.675+08:00[Asia/Shanghai]   
<span class="token list punctuation">-</span> Cookie=username,sovzn																		`åŸºäºæŒ‡å®šcookieçš„è¯·æ±‚è¿›è¡Œè·¯ç”±
<span class="token list punctuation">-</span> Cookie=username,[A-Za-z0-9]+															`åŸºäºæŒ‡å®šcookieçš„è¯·æ±‚è¿›è¡Œè·¯ç”±	
	`curl http://localhost:7979/product --cookie "username=sovzn"
<span class="token list punctuation">-</span> Header=X-Request-Id, \d+																 `åŸºäºè¯·æ±‚å¤´ä¸­çš„æŒ‡å®šå±æ€§çš„æ­£åˆ™åŒ¹é…è·¯ç”±(è¿™é‡Œå…¨æ˜¯æ•´æ•°)
	`curl http://localhost:7979/product -H "X-Request-Id:11"
<span class="token list punctuation">-</span> Method=GET,POST		 `åŸºäºæŒ‡å®šçš„è¯·æ±‚æ–¹å¼è¯·æ±‚è¿›è¡Œè·¯ç”±<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å®˜æ–¹æ›´å¤š: <a target="_blank" rel="noopener" href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.3.RELEASE/reference/html/#the-cookie-route-predicate-factory">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.3.RELEASE/reference/html/#the-cookie-route-predicate-factory</a></p>
<h4 id="After"><a href="#After" class="headerlink" title="- After"></a>- After</h4><blockquote>
<p><strong>æŒ‡å®šæ—¥æœŸä¹‹åçš„è¯·æ±‚è¿›è¡Œè·¯ç”±ï¼š</strong>å¦‚ä¸‹ï¼šåœ¨2021-09-20 20:38:55 åçš„è¯·æ±‚æ‰æœ‰æ•ˆ</p>
</blockquote>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8799 #å•†å“æœåŠ¡åœ°å€  </span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//PRODUCT   <span class="token comment">#PRODUCT:å•†å“æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç† å¦‚ï¼š/product/product/list</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>/product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2021<span class="token punctuation">-</span>09<span class="token punctuation">-</span>20T20<span class="token punctuation">:</span>38<span class="token punctuation">:</span>55.675+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>
            <span class="token comment"># ---------åœ¨2021-09-20 20:38:55 åçš„è¯·æ±‚æ‰æœ‰æ•ˆ------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­ï¼Œafteråçš„å‚æ•°ä¸ºjdk1.8åçš„æ–°å±æ€§ï¼šZonedDateTimeï¼ˆå½“å‰åŒºåŸŸæ—¶é—´ï¼‰:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ZonedDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>




<span class="token number">2021</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span>T20<span class="token operator">:</span><span class="token number">50</span><span class="token operator">:</span><span class="token number">36.804</span><span class="token operator">+</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">[</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Shanghai</span><span class="token punctuation">]</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><strong>æµ‹è¯•ï¼šåœ¨2021-09-20 20:38:55ä¹‹å‰çš„è¯·æ±‚â†“</strong></p>
<p> <img src="https://img-blog.csdnimg.cn/2021092020371497.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"><font color='red'> è¯·æ±‚æŠ¥404</font></p>
<p><strong>åœ¨2021-09-20 20:38:55ä¹‹åçš„è¯·æ±‚â†“</strong>:</p>
<p> <img src="https://img-blog.csdnimg.cn/20210920204027332.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p><font color='red'>è¯·æ±‚æˆåŠŸï¼Œè¿”å›ç›¸åº”æ•°æ®</font></p>
<h4 id="cookie"><a href="#cookie" class="headerlink" title="- cookie"></a>- cookie</h4><blockquote>
<p><strong>åŸºäºæŒ‡å®šcookieçš„è¯·æ±‚è¿›è¡Œè·¯ç”±</strong></p>
</blockquote>
<p>å¯¹äº- cookieçš„æµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡curlå‘½ä»¤ï¼ˆWin10å·²é¢„è£…curlï¼‰å‘è¯·æ±‚ä¸­æ·»åŠ cookieé”®å€¼å¯¹å‚æ•°</p>
<p><strong>1.æŒ‡å®šcookieä¸­å«æœ‰æŸé”®å€¼ä¿¡æ¯çš„è¯·æ±‚ï¼š Cookie=username,sovzn</strong>        </p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8799 #å•†å“æœåŠ¡åœ°å€  </span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//PRODUCT   <span class="token comment">#PRODUCT:å•†å“æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç† å¦‚ï¼š/product/product/list</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>/product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2021<span class="token punctuation">-</span>09<span class="token punctuation">-</span>20T20<span class="token punctuation">:</span>38<span class="token punctuation">:</span>55.675+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>
            <span class="token punctuation">-</span> Cookie=username<span class="token punctuation">,</span>sovzn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p> <img src="https://img-blog.csdnimg.cn/20210920210446593.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p>**2.æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼š - Cookie=username,[A-Za-z0-9]+        **        </p>
<p>**3.å¯ä»¥åŒæ—¶é…ç½®å¤šæ¡ - Cookie        **        </p>
<h4 id="Header"><a href="#Header" class="headerlink" title="- Header"></a>- Header</h4><blockquote>
<p>è¯·æ±‚ä¸­å¿…é¡»è¿˜æœ‰æŒ‡å®šçš„è¯·æ±‚å¤´ï¼šå¦‚ Header=X-Request-Id,1024</p>
</blockquote>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8799 #å•†å“æœåŠ¡åœ°å€  </span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//PRODUCT   <span class="token comment">#PRODUCT:å•†å“æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç† å¦‚ï¼š/product/product/list</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>/product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2021<span class="token punctuation">-</span>09<span class="token punctuation">-</span>20T20<span class="token punctuation">:</span>38<span class="token punctuation">:</span>55.675+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>
            <span class="token comment">#- Before=2021-04-20T10:23:22.124+08:00[Asia/Shanghai]</span>
            <span class="token comment">#- Between=2021-04-20T10:23:22.124+08:00[Asia/Shanghai],2021-04-20T10:25:22.124+08:00[Asia/Shanghai]</span>
            <span class="token comment">#- Cookie=username,sovzn</span>
            <span class="token comment">#- Cookie=username,[A-Za-z0-9]+</span>
            <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span><span class="token number">1024</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è¯·æ±‚å¤´ä¸­æœªåŠ å…¥X-Request-Id=1024çš„è®¿é—®ï¼š</p>
<p> <img src="https://img-blog.csdnimg.cn/20210920211803396.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p>è¯·æ±‚å¤´ä¸­åŠ å…¥X-Request-Id=1024çš„è®¿é—®ï¼šæˆåŠŸï¼Œå¹¶è¿”å›ç›¸åº”æ•°æ®</p>
<p> <img src="https://img-blog.csdnimg.cn/20210920211648321.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<h4 id="Method"><a href="#Method" class="headerlink" title="- Method"></a>- Method</h4><blockquote>
<p>æŒ‡å®šè¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼Œå¦‚ï¼š- Method=GET</p>
</blockquote>
<p><font color='red'>â€”â€”- ç»¼ä¸Šã€‚æ–­è¨€å¯ä»¥ç†è§£ä¸ºä¸€ç§è¿‡æ»¤ï¼Œåªè½¬å‘ç¬¦åˆæŸç§è¦æ±‚çš„è¯·æ±‚</font></p>
<h3 id="å¸¸ç”¨çš„Filter"><a href="#å¸¸ç”¨çš„Filter" class="headerlink" title="å¸¸ç”¨çš„Filter"></a>å¸¸ç”¨çš„Filter</h3><blockquote>
<p><strong>è·¯ç”±è¿‡æ»¤å™¨å…è®¸ä»¥æŸç§æ–¹å¼ä¿®æ”¹ä¼ å…¥çš„HTTPè¯·æ±‚æˆ–ä¼ å‡ºçš„HTTPå“åº”ã€‚è·¯ç”±ç­›é€‰å™¨çš„ä½œç”¨åŸŸæ˜¯ç‰¹å®šè·¯ç”±ã€‚</strong></p>
</blockquote>
<h4 id="å†…ç½®Filter"><a href="#å†…ç½®Filter" class="headerlink" title="å†…ç½®Filter"></a>å†…ç½®Filter</h4><ul>
<li><strong>AddRequestHeader</strong>ï¼šç»™è½¬å‘çš„è¯·æ±‚åŠ å…¥æŒ‡å®šè¯·æ±‚å¤´ä¿¡æ¯</li>
<li><strong>AddRequestParamete</strong>ï¼šç»™è½¬å‘çš„è¯·æ±‚åŠ å…¥æŒ‡å®šå‚æ•°</li>
<li><strong>AddResponseHeader</strong>    ï¼šç»™è½¬å‘è¯·æ±‚çš„å“åº”åŠ å…¥æŒ‡å®šå¤´ä¿¡æ¯</li>
<li><strong>PrefixPath</strong>ï¼šç»™è½¬å‘çš„è¯·æ±‚çš„URLåŠ å…¥æŒ‡å®šå‰ç¼€ä¿¡æ¯</li>
<li><strong>StripPrefix=n</strong>ï¼šå»æ‰é”è½¬å‘çš„è¯·æ±‚çš„nä¸ªå‰ç¼€</li>
</ul>
<blockquote>
<p>æµ‹è¯•ï¼š</p>
</blockquote>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token comment">#uri: http://localhost:8799 #å•†å“æœåŠ¡åœ°å€ </span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//PRODUCT   <span class="token comment">#PRODUCT:å•†å“æœåŠ¡æœåŠ¡åï¼Œå®ç°è¯·æ±‚è´Ÿè½½å‡è¡¡å¤„ç† </span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/product<span class="token punctuation">,</span>/product/<span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>/product/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2021<span class="token punctuation">-</span>09<span class="token punctuation">-</span>20T20<span class="token punctuation">:</span>38<span class="token punctuation">:</span>55.675+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> AddRequestHeader=User<span class="token punctuation">-</span>Name<span class="token punctuation">,</span> sovzn
            <span class="token punctuation">-</span> AddRequestParameter=color<span class="token punctuation">,</span> blue
            <span class="token punctuation">-</span> AddResponseHeader=X<span class="token punctuation">-</span>Response<span class="token punctuation">-</span>Red<span class="token punctuation">,</span> Blue
            <span class="token comment">#- PrefixPath=/mypath #åŠ å…¥æŒ‡å®šå‰ç¼€filter</span>
            <span class="token comment">#- StripPrefix=1 #å»æ‰è¯·æ±‚è·¯å¾„ä¸­nçº§å‰ç¼€</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> category_router <span class="token comment">#è·¯ç”±å¯¹è±¡å”¯ä¸€æ ‡è¯†</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//CATEGORY
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token comment">#æ–­è¨€ ç”¨æ¥é…ç½®è·¯ç”±è§„åˆ™</span>
            <span class="token punctuation">-</span> Path=/category
<span class="token comment">#          filters:</span>
<span class="token comment">#            - StripPrefix=1  # /list</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åœ¨å•†å“æœåŠ¡PRODUCTçš„æ–¹æ³•ä¸­æ·»åŠ æ¥æ”¶å‚æ•°çš„æ–¹æ³•ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"product"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">product</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">String</span> color<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è·å–Filterä¸­è®¾ç½®åœ¨è¯·æ±‚å¤´ä¿¡æ¯ï¼š"</span><span class="token operator">+</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è·å–Filterä¸­è®¾ç½®çš„è¯·æ±‚å‚æ•°ï¼š"</span><span class="token operator">+</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token string">"product ok,å½“å‰æœåŠ¡ç«¯å£"</span><span class="token operator">+</span>port<span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æµ‹è¯•è®¿é—®ï¼š</p>
<p> <img src="https://img-blog.csdnimg.cn/20210912220637158.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p> <img src="https://img-blog.csdnimg.cn/20210921101725101.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p> <img src="https://img-blog.csdnimg.cn/20210921101829381.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<blockquote>
<p><code>- PrefixPath=/mypath #åŠ å…¥æŒ‡å®šå‰ç¼€filter</code></p>
</blockquote>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token punctuation">-</span> PrefixPath=/mypath <span class="token comment">#åŠ å…¥æŒ‡å®šå‰ç¼€filter</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>åœ¨å•†å“æœåŠ¡PRODUCTä¸­åŠ å…¥URLä¸ºâ€/mypath/productâ€çš„æ–¹æ³•<br>ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/mypath/product"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">mypathproduct</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">String</span> color<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token keyword">return</span> <span class="token string">"product ok,URLä¸º/mypath/product,å½“å‰æœåŠ¡ç«¯å£"</span><span class="token operator">+</span>port<span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>æµ‹è¯•ï¼š</p>
<p> <img src="https://img-blog.csdnimg.cn/20210921102817274.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<blockquote>
<p> <code>- StripPrefix=1 #å»æ‰è¯·æ±‚è·¯å¾„ä¸­nçº§å‰ç¼€</code>Â  ä¸æµ‹è¯•äº†ğŸ¥±</p>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>å¦‚æœä¸¤ä¸ªè·¯ç”±ä¸­æœ‰åŒæ ·çš„è¯·æ±‚è·¯å¾„ï¼Œå¦‚ä¸‹çš„/list</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">gateway</span><span class="token punctuation">:</span>
     <span class="token key atrule">routes</span><span class="token punctuation">:</span>
       <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_router 
         <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8799</span>
         <span class="token comment"># uri: lb://PRODUCT   </span>
         <span class="token key atrule">predicates</span><span class="token punctuation">:</span> 
           <span class="token punctuation">-</span> Path=/list

       <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> category_router
         <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8787</span> 
         <span class="token comment">#uri: lb://CATEGORY</span>
         <span class="token key atrule">predicates</span><span class="token punctuation">:</span>  
           <span class="token punctuation">-</span> Path=/list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä¼šæŒ‰ç…§è·¯ç”±é…ç½®é¡ºåºè½¬å‘ï¼Œå³å½“é€šè¿‡ç½‘å…³æœåŠ¡è®¿é—®/listæ—¶ï¼Œä¼šè½¬å‘åˆ°<a target="_blank" rel="noopener" href="http://localhost:8799/list">http://localhost:8799/list</a> </font></p>
<h4 id="è‡ªå®šä¹‰å…¨å±€Filter"><a href="#è‡ªå®šä¹‰å…¨å±€Filter" class="headerlink" title="è‡ªå®šä¹‰å…¨å±€Filter"></a>è‡ªå®šä¹‰å…¨å±€Filter</h4><blockquote>
<p>æ³¨æ„ï¼šè‡ªå®šä¹‰çš„å…¨å±€Filteræ˜¯é’ˆå¯¹å½“å‰ç½‘å…³æœåŠ¡çš„æ‰€æœ‰è¯·æ±‚ï¼Œè€Œåœ¨è·¯ç”±ä¸­é…ç½®çš„filtersåªæ˜¯å¯¹å½“å‰è·¯ç”±è¦è½¬å‘çš„è¯·æ±‚è¿›è¡Œä¸€ç³»åˆ—å¤„ç†ã€‚</p>
</blockquote>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">class</span> <span class="token class-name">MyGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿›å…¥è‡ªå®šä¹‰çš„filter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·èº«ä»½ä¿¡æ¯åˆæ³•,æ”¾è¡Œè¯·æ±‚ç»§ç»­æ‰§è¡Œ!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"éæ³•ç”¨æˆ·,æ‹’ç»è®¿é—®!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token comment">/**
 *å½“æœ‰å¤šä¸ªè‡ªå®šä¹‰Filteræ—¶ç”¨æ¥æ’åºï¼Œintæ•°å­—æ¥æŒ‡å®šfilterçš„æ‰§è¡Œé¡ºåº
 * é»˜è®¤æŒ‰ç…§è‡ªç„¶æ•°å­—è¿›è¡Œæ’åºï¼Œ-1è¡¨ç¤ºåœ¨ä»»ä½•filterä¹‹å‰æ‰§è¡Œ
 **/</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>1.ä¸å¸¦å‚ç›´æ¥è®¿é—®ï¼š</strong><a target="_blank" rel="noopener" href="http://localhost:7979/product">http://localhost:7979/product</a></p>
<p> <img src="https://img-blog.csdnimg.cn/20210921111222331.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
<p><strong>2.å¸¦å‚nameè®¿é—®ï¼š</strong></p>
<p> <img src="https://img-blog.csdnimg.cn/2021092111140913.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAU292em4=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" loading="lazy"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"> </p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="Donate" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">ç»™ä¸ªé¥­é’±ï¼Ÿ</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/J2Sv6rVeLtAPiHx.jpg"><img loading="lazy" src="https://i.loli.net/2020/12/23/J2Sv6rVeLtAPiHx.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/4rBXF1deMD6KyN8.png"><img loading="lazy" src="https://i.loli.net/2020/12/23/4rBXF1deMD6KyN8.png" alt="QQ æ”¯ä»˜" title="QQ æ”¯ä»˜"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/XvirFV3o6GyRMZU.png"><img loading="lazy" src="https://i.loli.net/2020/12/23/XvirFV3o6GyRMZU.png" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Sovzn</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://sovzn.github.io/2021/09/12/Gateway/" title="Gateway">http://sovzn.github.io/2021/09/12/Gateway/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/09/15/List%E6%8E%92%E5%BA%8F/" rel="prev" title="Listæ’åº"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Listæ’åº</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/08/12/Hystrix/" rel="next" title="Hystrix"><span class="post-nav-text">Hystrix</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>ç‚¹å‡»æŒ‰é’®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br><span>è‹¥æ²¡æœ‰æœ¬æ–‡ Issueï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Comment æ¨¡ç‰ˆæ–°å»ºã€‚</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+Gateway">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2025 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Sovzn</span></div><div class="live_time"><span>æœ¬åšå®¢å·²è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div id="local-search-result"></div></div></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>