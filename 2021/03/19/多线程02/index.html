<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="Sovzn"><meta name="copyright" content="Sovzn"><meta name="generator" content="Hexo 5.3.0"><meta name="theme" content="hexo-theme-yun"><title>å¤šçº¿ç¨‹02 | å¤§å¸ˆå…„</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.22/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"sovzn.github.io","root":"/","title":"å¤§å¸ˆå…„çš„å°ç ´ç«™","version":"1.3.0","mode":"auto","copycode":true,"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="å¤šçº¿ç¨‹â€”â€”02çº¿ç¨‹ä¼˜å…ˆçº§ Javaæä¾›äº†ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§ä¼˜å…ˆçº§å†³å®šè°ƒåº¦é‚£ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œã€‚ çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼ŒèŒƒå›´ä»1~10 Thread.MIN_PRIORITY&#x3D;1; Thread.MAX_PRIORITY&#x3D;10; Thread.NORM_PRIORITY&#x3D;5;   ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§ getPriority().setPri">
<meta property="og:type" content="article">
<meta property="og:title" content="å¤šçº¿ç¨‹02">
<meta property="og:url" content="http://sovzn.github.io/2021/03/19/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/index.html">
<meta property="og:site_name" content="å¤§å¸ˆå…„">
<meta property="og:description" content="å¤šçº¿ç¨‹â€”â€”02çº¿ç¨‹ä¼˜å…ˆçº§ Javaæä¾›äº†ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§ä¼˜å…ˆçº§å†³å®šè°ƒåº¦é‚£ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œã€‚ çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼ŒèŒƒå›´ä»1~10 Thread.MIN_PRIORITY&#x3D;1; Thread.MAX_PRIORITY&#x3D;10; Thread.NORM_PRIORITY&#x3D;5;   ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§ getPriority().setPri">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-03-19T12:50:00.000Z">
<meta property="article:modified_time" content="2021-03-23T08:45:00.653Z">
<meta property="article:author" content="Sovzn">
<meta property="article:tag" content="JavaåŸºç¡€">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Sovzn"><img width="96" loading="lazy" src="/Yun.png" alt="Sovzn"><span class="site-author-status" title="æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ">ğŸ˜Š</span></a><div class="site-author-name"><a href="/about/">Sovzn</a></div><a class="site-name" href="/about/site.html">å¤§å¸ˆå…„</a><sub class="site-subtitle"></sub><div class="site-desciption">æˆ‘åªæ‹¥æœ‰ä½ çš„æœˆå…‰,æˆ‘è¦æŠŠå®ƒå½“ä½œéª„é˜³ã€‚</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">90</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">30</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">20</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="å¾®åš" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="è±†ç“£" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/null" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E2%80%94%E2%80%9402"><span class="toc-number">1.</span> <span class="toc-text">å¤šçº¿ç¨‹â€”â€”02</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.1.</span> <span class="toc-text">çº¿ç¨‹ä¼˜å…ˆçº§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8Bdaemon"><span class="toc-number">1.2.</span> <span class="toc-text">å®ˆæŠ¤çº¿ç¨‹daemon</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">1.3.</span> <span class="toc-text">çº¿ç¨‹åŒæ­¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91"><span class="toc-number">1.3.1.</span> <span class="toc-text">å¹¶å‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%9F%E5%88%97%E5%92%8C%E9%94%81"><span class="toc-number">1.3.2.</span> <span class="toc-text">é˜Ÿåˆ—å’Œé”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E4%B8%8D%E5%AE%89%E5%85%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.3.</span> <span class="toc-text">ä¸‰å¤§ä¸å®‰å…¨æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%951-%E4%B9%B0%E7%A5%A8"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">æµ‹è¯•1:ä¹°ç¥¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%952-%E5%8F%96%E9%92%B1"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">æµ‹è¯•2:å–é’±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%953-%E9%9B%86%E5%90%88"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">æµ‹è¯•3:é›†åˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.4.</span> <span class="toc-text">åŒæ­¥æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%9D%97"><span class="toc-number">1.3.5.</span> <span class="toc-text">åŒæ­¥å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lock%EF%BC%88%E9%94%81%EF%BC%89"><span class="toc-number">1.3.6.</span> <span class="toc-text">Lockï¼ˆé”ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">1.4.</span> <span class="toc-text">æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">é¿å…æ­»é”çš„æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%BB%E9%94%81%E4%BA%A7%E7%94%9F%E7%9A%84%E5%9B%9B%E4%B8%AA%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://Sovzn.github.io/2021/03/19/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Sovzn"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å¤§å¸ˆå…„"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">å¤šçº¿ç¨‹02</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2021-03-19 20:50:00" itemprop="dateCreated datePublished" datetime="2021-03-19T20:50:00+08:00">2021-03-19</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2021-03-23 16:45:00" itemprop="dateModified" datetime="2021-03-23T16:45:00+08:00">2021-03-23</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Java%E5%9F%BA%E7%A1%80/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">JavaåŸºç¡€</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/Java%E5%9F%BA%E7%A1%80/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">JavaåŸºç¡€</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><h1 id="å¤šçº¿ç¨‹â€”â€”02"><a href="#å¤šçº¿ç¨‹â€”â€”02" class="headerlink" title="å¤šçº¿ç¨‹â€”â€”02"></a>å¤šçº¿ç¨‹â€”â€”02</h1><h2 id="çº¿ç¨‹ä¼˜å…ˆçº§"><a href="#çº¿ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="çº¿ç¨‹ä¼˜å…ˆçº§"></a>çº¿ç¨‹ä¼˜å…ˆçº§</h2><ul>
<li>Javaæä¾›äº†ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§ä¼˜å…ˆçº§å†³å®šè°ƒåº¦é‚£ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œã€‚</li>
<li>çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼ŒèŒƒå›´ä»1~10<ul>
<li>Thread.MIN_PRIORITY=1;</li>
<li>Thread.MAX_PRIORITY=10;</li>
<li>Thread.NORM_PRIORITY=5;</li>
</ul>
</li>
<li>ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§<ul>
<li>getPriority().setPriority( int xxx)</li>
</ul>
</li>
</ul>
<p><strong>ä¼˜å…ˆçº§çš„è®¾å®šå»ºè®®åœ¨startï¼ˆï¼‰è°ƒåº¦å‰</strong></p>
<p><font color='cornflowerblue'>æ³¨æ„ï¼šä¼˜å…ˆçº§ä½åªæ˜¯æ„å‘³ç€è·å¾—è°ƒåº¦çš„æ¦‚ç‡ä½ï¼Œå¹¶ä¸æ˜¯ä¼˜å…ˆçº§ä½å°±ä¸ä¼šè¢«è°ƒç”¨äº†ï¼Œè¿™éƒ½æ˜¯çœ‹CPUçš„è°ƒåº¦ã€‚</font></p>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æµ‹è¯•çº¿ç¨‹çš„ä¼˜å…ˆçº§</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestPriority</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//æ‰“å°ä¸»çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"ä¸»çº¿ç¨‹---->ä¼˜å…ˆçº§ï¼š"</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span>
        <span class="token class-name">MyPriority</span> myPriority<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">MyPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myPriority<span class="token punctuation">,</span> <span class="token string">"çº¿ç¨‹6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…ˆè®¾ç½®ä¼˜å…ˆçº§ï¼Œåœ¨å¯åŠ¨</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t4<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MAX_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//MAX_PRIORITY=10</span>
        t4<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t5<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t5<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t6<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t6<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">MyPriority</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"---->ä¼˜å…ˆçº§ï¼š"</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

ç»“æœï¼š
mainä¸»çº¿ç¨‹<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">5</span>
çº¿ç¨‹<span class="token number">1</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">5</span>
çº¿ç¨‹<span class="token number">4</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">10</span>
çº¿ç¨‹<span class="token number">5</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">9</span>
çº¿ç¨‹<span class="token number">6</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">8</span>
çº¿ç¨‹<span class="token number">3</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">4</span>
çº¿ç¨‹<span class="token number">2</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>ä¼˜å…ˆçº§ï¼š<span class="token number">1</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä»æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å…ˆæ‰§è¡Œï¼Œä½†ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¼˜å…ˆçº§ä½çš„å…ˆæ‰§è¡Œï¼Œå› ä¸ºä¼˜å…ˆçº§åªèƒ½æé«˜çº¿ç¨‹è¢«ä¼˜å…ˆè°ƒåº¦çš„æ¦‚ç‡ï¼Œå…·ä½“è¿˜å¾—çœ‹CPUçš„è°ƒåº¦ã€‚</font></p>
<h2 id="å®ˆæŠ¤çº¿ç¨‹daemon"><a href="#å®ˆæŠ¤çº¿ç¨‹daemon" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹daemon"></a>å®ˆæŠ¤çº¿ç¨‹daemon</h2><ul>
<li>çº¿ç¨‹åˆ†ä¸º<font color='red'>ç”¨æˆ·çº¿ç¨‹</font>ï¼ˆå¦‚ï¼šmainï¼‰å’Œ<font color='red'>å®ˆæŠ¤çº¿ç¨‹</font>ï¼ˆå¦‚ï¼šåƒåœ¾å›æ”¶GCï¼Œç›‘æ§å†…å­˜ï¼‰</li>
<li>è™šæ‹Ÿæœºå¿…é¡»ç¡®ä¿ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</li>
<li>è™šæ‹Ÿæœºä¸ç”¨ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</li>
<li>ä¸€èˆ¬çº¿ç¨‹éƒ½é»˜è®¤ä¸ºç”¨æˆ·çº¿ç¨‹</li>
</ul>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token comment">//æµ‹è¯•å®ˆæŠ¤çº¿ç¨‹</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDaemmon</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Dog</span> dog<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">YOU</span> you<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">YOU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”¨æˆ·çº¿ç¨‹</span>
            <span class="token class-name">Thread</span> thread<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>you<span class="token punctuation">)</span><span class="token punctuation">;</span>
            thread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é»˜è®¤æ˜¯falseï¼Œæ ‡è¯†ç”¨æˆ·çº¿ç¨‹ï¼Œtrueæ ‡è¯†å®ˆæŠ¤çº¿ç¨‹</span>
            thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> 
    <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A happy year"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------Good Bye--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">class</span> YOU <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"bless dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

ç»“æœï¼š
bless dog
bless dog
bless dog
bless dog
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token class-name">A</span> happy year
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token class-name">Good</span> <span class="token class-name">Bye</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
bless dog
bless dog
bless dog
bless dog
bless dog
bless dog

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼šå½“ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ­»äº¡åï¼Œå®ˆæŠ¤çº¿ç¨‹è™½ç„¶æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ç»“æ„ï¼Œä½†ä¸ä¹…åä¹Ÿç»“æŸæ‰§è¡Œï¼Œå› ä¸ºè™šæ‹Ÿæœºåªç¡®ä¿ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¸ç”¨ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ‰§è¡Œå®Œæ¯•ã€‚</font></p>
<h2 id="çº¿ç¨‹åŒæ­¥"><a href="#çº¿ç¨‹åŒæ­¥" class="headerlink" title="çº¿ç¨‹åŒæ­¥"></a>çº¿ç¨‹åŒæ­¥</h2><p>å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªèµ„æº</p>
<h3 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h3><p>â€”-&gt;åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œ</p>
<p>å¤„ç†å¤šçº¿ç¨‹é—®é¢˜æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹è®¿åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æŸäº›çº¿ç¨‹è¿˜ä¿®æ”¹äº†è¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦çº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å…¶å®æ˜¯ä¸€ç§<font color='red'> ç­‰å¾…æœºåˆ¶ </font>ï¼Œå¤šä¸ªéœ€è¦åŒæ—¶è®¿é—®æ­¤å¯¹è±¡çš„çº¿ç¨‹è¿›å…¥è¿™ä¸ª<font color='red'><strong>å¯¹è±¡çš„ç­‰å¾…æ± </strong></font>å½¢æˆé˜Ÿåˆ—ï¼Œç­‰å¾…å‰é¢çš„çº¿ç¨‹ä½¿ç”¨å®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†ä½¿ç”¨ã€‚</p>
<h3 id="é˜Ÿåˆ—å’Œé”"><a href="#é˜Ÿåˆ—å’Œé”" class="headerlink" title="é˜Ÿåˆ—å’Œé”"></a>é˜Ÿåˆ—å’Œé”</h3><p><strong>çº¿ç¨‹åŒæ­¥çš„å½¢æˆæ¡ä»¶ï¼šé˜Ÿåˆ—+é”</strong></p>
<p>ç”±äºåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å­˜å‚¨ç©ºé—´ï¼Œåœ¨å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†è®¿é—®å†²çªé—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ•°æ®åœ¨æ–¹æ³•ä¸­è¢«è®¿é—®æ—¶çš„æ­£ç¡®æ€§ï¼Œåœ¨è®¿é—®æ—¶åŠ å…¥<font color='red'><strong>é”æœºåˆ¶synchronized</strong></font>,å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹è±¡çš„æ’å®ƒé”ï¼Œç‹¬å èµ„æºï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œä½¿ç”¨åé‡Šæ”¾é”å³å¯ã€‚</p>
<p>å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ä¼šå¯¼è‡´å…¶ä»–éœ€è¦æ­¤é”çš„çº¿ç¨‹æŒ‚èµ·ï¼ˆé™ä½æ€§èƒ½ï¼‰ï¼›</li>
<li>åœ¨å¤šçº¿ç¨‹ç«äº‰ä¸‹ï¼ŒåŠ é”ï¼Œé‡Šæ”¾é”ä¼šå¯¼è‡´æ¯”è¾ƒå¤šçš„<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>å’Œ<strong>è°ƒåº¦å»¶æ—¶</strong>ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜ï¼›</li>
<li>å¦‚æœä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªä¼˜å…ˆçº§ä½çš„çº¿ç¨‹é‡Šæ”¾é”ï¼Œä¼šå¯¼è‡´ä¼˜å…ˆçº§å€’ç½®ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜ï¼›</li>
</ul>
<h3 id="ä¸‰å¤§ä¸å®‰å…¨æ¡ˆä¾‹"><a href="#ä¸‰å¤§ä¸å®‰å…¨æ¡ˆä¾‹" class="headerlink" title="ä¸‰å¤§ä¸å®‰å…¨æ¡ˆä¾‹"></a>ä¸‰å¤§ä¸å®‰å…¨æ¡ˆä¾‹</h3><h4 id="æµ‹è¯•1-ä¹°ç¥¨"><a href="#æµ‹è¯•1-ä¹°ç¥¨" class="headerlink" title="æµ‹è¯•1:ä¹°ç¥¨"></a>æµ‹è¯•1:ä¹°ç¥¨</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">syn</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnsafeBuyTickets</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">BuyTicket</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BuyTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹1ï¼šå°çº¢"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹2ï¼šå°å…°"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹3ï¼šå°æ˜"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">BuyTicket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>
     <span class="token comment">//ç¥¨æ•°</span>
    <span class="token keyword">int</span> ticketNums<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">//æ ‡å¿—ä½</span>
    <span class="token keyword">boolean</span> flag<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//ä¹°ç¥¨</span>
       <span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
             <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
        <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ticketNums<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//ä¹°ç¥¨</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ‹¿åˆ°äº†ç¬¬"</span><span class="token operator">+</span>ticketNums<span class="token operator">+</span><span class="token string">"ç¥¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ticketNums<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">æ‰§è¡Œç»“æœ<span class="token operator">:</span>
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">10</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">9</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">8</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">7</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">6</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">5</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">10</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">3</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">2</span>ç¥¨
çº¿ç¨‹<span class="token number">1</span>ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬<span class="token number">10</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">1</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">4</span>ç¥¨


<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œ çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•°æ®ç´Šä¹± ï¼Œä¸‰ä¸ªäººåŒæ—¶æ‹¿åˆ°äº†ç¬¬10ç¥¨ï¼Œè¿˜æœ‰äººæ‹¿åˆ°ç¬¬0ç¥¨ã€‚</font></p>
<h4 id="æµ‹è¯•2-å–é’±"><a href="#æµ‹è¯•2-å–é’±" class="headerlink" title="æµ‹è¯•2:å–é’±"></a>æµ‹è¯•2:å–é’±</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">syn</span><span class="token punctuation">;</span>
<span class="token comment">//ä¸¤äººé“¶è¡Œå–é’±</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnsafeBank</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Account</span> account<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"ç»“å©šåŸºé‡‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Drawing</span> d1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Drawing</span><span class="token punctuation">(</span>account<span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token string">"you"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Drawing</span> d2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Drawing</span><span class="token punctuation">(</span>account<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"she"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        d1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        d2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//è´¦æˆ·</span>
<span class="token keyword">class</span> <span class="token class-name">Account</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> money<span class="token punctuation">;</span><span class="token comment">//ä½™é¢</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//å¡å</span>
    <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token keyword">int</span> money<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//é“¶è¡Œï¼šæ¨¡æ‹Ÿå–æ¬¾</span>
<span class="token keyword">class</span> <span class="token class-name">Drawing</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">Account</span> account<span class="token punctuation">;</span><span class="token comment">//è´¦æˆ·</span>
    <span class="token comment">//å–äº†å¤šå°‘é’±</span>
    <span class="token keyword">int</span> drawingMoney<span class="token punctuation">;</span>
    <span class="token comment">//ç°åœ¨å¤šå°‘é’±</span>
    <span class="token keyword">int</span> nowMoney<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Drawing</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span><span class="token keyword">int</span> drawingMoney<span class="token punctuation">,</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//çº¿ç¨‹å</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>account<span class="token operator">=</span>account<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>drawingMoney<span class="token operator">=</span>drawingMoney<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">//å–é’±</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//åˆ¤æ–­æœ‰æ²¡æœ‰é’±</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span>money<span class="token operator">-</span>drawingMoney<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":é’±ä¸å¤Ÿï¼Œå–ä¸äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//å»¶æ—¶ï¼Œæ”¾å¤§é—®é¢˜çš„å‘ç”Ÿæ€§</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//å¡å†…ä½™é¢=ä½™é¢-å–çš„é’±</span>
        account<span class="token punctuation">.</span>money<span class="token operator">=</span>account<span class="token punctuation">.</span>money<span class="token operator">-</span>drawingMoney<span class="token punctuation">;</span>
        <span class="token comment">//åˆ°æ‰‹çš„é’±</span>
        nowMoney<span class="token operator">=</span>nowMoney<span class="token operator">+</span>drawingMoney<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"ä½™é¢ä¸ºï¼š"</span><span class="token operator">+</span>account<span class="token punctuation">.</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"åˆ°æ‰‹çš„é’±ï¼š"</span><span class="token operator">+</span>nowMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
ç»“æœï¼š
ç»“å©šåŸºé‡‘ä½™é¢ä¸ºï¼š<span class="token number">50</span>
youåˆ°æ‰‹çš„é’±ï¼š<span class="token number">50</span>
ç»“å©šåŸºé‡‘ä½™é¢ä¸ºï¼š<span class="token operator">-</span><span class="token number">50</span>
sheåˆ°æ‰‹çš„é’±ï¼š<span class="token number">100</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œ çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•°æ®é”™è¯¯ï¼Œä¸¤äººå–å‡ºçš„é’±æ•°å¤§äºè´¦æˆ·ä½™é¢ã€‚</font></p>
<h4 id="æµ‹è¯•3-é›†åˆ"><a href="#æµ‹è¯•3-é›†åˆ" class="headerlink" title="æµ‹è¯•3:é›†åˆ"></a>æµ‹è¯•3:é›†åˆ</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnsafeLIst</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>
                <span class="token comment">//10000æ­¤å¾ªç¯ï¼Œæ¯æ¬¡å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå°†çº¿ç¨‹åå†™å…¥listé›†åˆï¼Œç†è®ºä¼šå†™å…¥10000ä¸ª</span>
               list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

ç»“æœï¼š
<span class="token number">9999</span>
<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ç»“æœå†™å…¥äº†9999ä¸ªï¼Œç¼ºä¸€ä¸ª</font></p>
<h3 id="åŒæ­¥æ–¹æ³•"><a href="#åŒæ­¥æ–¹æ³•" class="headerlink" title="åŒæ­¥æ–¹æ³•"></a>åŒæ­¥æ–¹æ³•</h3><p>ç”±äºæˆ‘ä»¬å¯ä»¥é€šè¿‡privateå…³é”®å­—æ¥ä¿è¯æ•°æ®å¯¹è±¡åªèƒ½è¢«æ–¹æ³•è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ–¹æ³•æå‡ºä¸€å¥—æœºåˆ¶ï¼Œè¿™å¥—æœºåˆ¶å°±æ˜¯synchronizedå…³é”®å­—ï¼Œå®ƒæœ‰ä¸¤ç§ç”¨æ³•ï¼šsynchronizedæ–¹æ³•å’Œsynchronizedå—ã€‚</p>
<p><font color='cornflowerblue'><strong>åŒæ­¥æ–¹æ³•ï¼špublic synchronized void methodï¼ˆint argsï¼‰{ }</strong></font></p>
<p>synchronizedæ–¹æ³•æ§åˆ¶å¯¹â€å¯¹è±¡â€çš„è®¿é—®ï¼Œæ¯ä¸ªå¯¹è±¡å¯¹åº”ä¸€æŠŠé”ï¼Œæ¯ä¸ªsynchronizedæ–¹æ³•éƒ½å¿…é¡»è·å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡çš„é”æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™çº¿ç¨‹ä¼šé˜»å¡ï¼Œæ–¹æ³•ä¸€æ—¦æ‰§è¡Œï¼Œå°±ç‹¬å è¯¥é”ï¼Œç›´åˆ°è¯¥æ–¹æ³•è¿”å›æ‰é‡Šæ”¾é”ï¼Œåé¢è¢«é˜»å¡çš„çº¿ç¨‹æ‰èƒ½è·å¾—è¿™ä¸ªé”ï¼Œç»§ç»­æ‰§è¡Œã€‚</p>
<p><strong>ç¼ºé™·</strong>ï¼š<font color='cornflowerblue'>è‹¥å°†ä¸€ä¸ªå¤§çš„æ–¹æ³•å£°æ˜ä¸ºsynchronizedå°†ä¼šå½±å“æ•ˆç‡ã€‚</font></p>
<p><strong>æ–¹æ³•é‡Œé¢éœ€è¦ä¿®æ”¹çš„å†…å®¹æ‰éœ€è¦é”ï¼Œé”çš„å¤ªå¤šï¼Œæµªè´¹èµ„æºã€‚</strong></p>
<h3 id="åŒæ­¥å—"><a href="#åŒæ­¥å—" class="headerlink" title="åŒæ­¥å—"></a>åŒæ­¥å—</h3><p><strong>åŒæ­¥å—ï¼šsynchronized ï¼ˆ<font color='red'>Obj</font>ï¼‰{}</strong></p>
<p><font color='red'><strong>Obj</strong></font>ç§°ä¹‹ä¸º<strong>åŒæ­¥ç›‘è§†å™¨</strong>ï¼Œ<font color='red'><strong>ä¹Ÿå°±æ˜¯è¦é”ä½çš„å¯¹è±¡</strong>ã€‚</font></p>
<ul>
<li><p><strong>Obj</strong>å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯æ¨èä½¿ç”¨å…±äº«èµ„æºä½œä¸ºåŒæ­¥ç›‘è§†å™¨</p>
</li>
<li><p><font color='cornflowerblue'>åŒæ­¥æ–¹æ³•ä¸­æ— éœ€æŒ‡å®šåŒæ­¥ç›‘è§†å™¨ï¼Œå› ä¸ºåŒæ­¥æ–¹æ³•çš„ç›‘è§†å°±æ˜¯thisï¼Œå°±æ˜¯è¿™ä¸ª<strong>å¯¹è±¡æœ¬èº«</strong>ï¼Œæˆ–è€…æ˜¯class</font></p>
</li>
</ul>
<p><strong>åŒæ­¥ç›‘è§†å™¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
<ul>
<li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé”å®šåŒæ­¥ç›‘è§†å™¨ï¼Œæ‰§è¡Œå…¶ä¸­ä»£ç </li>
<li>ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨è¢«é”å®šï¼Œæ— æ³•è®¿é—®</li>
<li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®Œæ¯•ï¼Œè§£é”åŒæ­¥ç›‘è§†å™¨</li>
<li>ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨æ²¡æœ‰é”ï¼Œç„¶åé”å®šå¹¶è®¿é—®</li>
<li>â€¦â€¦â€¦..</li>
</ul>
<p><strong>æµ‹è¯•ä¹°ç¥¨æ¡ˆä¾‹ï¼šä½¿ç”¨åŒæ­¥æ–¹æ³•</strong></p>
<p>æˆ‘ä»¬åªéœ€è¦ç»™ä¹°ç¥¨æ–¹æ³•buyï¼ˆï¼‰åŠ å…³é”®å­— synchronizedï¼Œæ˜¯å…¶å˜ä¸º<strong>åŒæ­¥æ–¹æ³•</strong>ï¼Œ<font color='red'>æ­¤æ—¶é”çš„æ˜¯ BuyTicketç±»æœ¬èº«</font></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// synchronizedåŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯this,å½“å‰å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ticketNums<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//ä¹°ç¥¨</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ‹¿åˆ°äº†ç¬¬"</span><span class="token operator">+</span>ticketNums<span class="token operator">+</span><span class="token string">"ç¥¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ticketNums<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">çº¿ç¨‹<span class="token number">1</span>ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬<span class="token number">10</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">9</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">8</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">7</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">6</span>ç¥¨
çº¿ç¨‹<span class="token number">1</span>ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬<span class="token number">5</span>ç¥¨
çº¿ç¨‹<span class="token number">1</span>ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬<span class="token number">4</span>ç¥¨
çº¿ç¨‹<span class="token number">3</span>ï¼šå°æ˜æ‹¿åˆ°äº†ç¬¬<span class="token number">3</span>ç¥¨
çº¿ç¨‹<span class="token number">2</span>ï¼šå°å…°æ‹¿åˆ°äº†ç¬¬<span class="token number">2</span>ç¥¨
çº¿ç¨‹<span class="token number">1</span>ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬<span class="token number">1</span>ç¥¨

    
<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>æµ‹è¯•å–é’±æ¡ˆä¾‹ï¼šä½¿ç”¨åŒæ­¥å—</strong></p>
<p>  å¯¹runï¼ˆï¼‰æ–¹æ³•è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼Œé”å®šå…±äº«èµ„æºaccount</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       <span class="token comment">//åŒæ­¥å—ï¼Œé”å®šaccount</span>
       <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
           <span class="token comment">//åˆ¤æ–­æœ‰æ²¡æœ‰é’±</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span>money<span class="token operator">-</span>drawingMoney<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":é’±ä¸å¤Ÿï¼Œå–ä¸äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">return</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
           <span class="token comment">//å»¶æ—¶</span>
           <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
           <span class="token comment">//å¡å†…ä½™é¢=ä½™é¢-å–çš„é’±</span>
           account<span class="token punctuation">.</span>money<span class="token operator">=</span>account<span class="token punctuation">.</span>money<span class="token operator">-</span>drawingMoney<span class="token punctuation">;</span>
           <span class="token comment">//åˆ°æ‰‹çš„é’±</span>
           nowMoney<span class="token operator">=</span>nowMoney<span class="token operator">+</span>drawingMoney<span class="token punctuation">;</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"ä½™é¢ä¸ºï¼š"</span><span class="token operator">+</span>account<span class="token punctuation">.</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"åˆ°æ‰‹çš„é’±ï¼š"</span><span class="token operator">+</span>nowMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ç»“æœï¼š

ç»“å©šåŸºé‡‘ä½™é¢ä¸ºï¼š50
youåˆ°æ‰‹çš„é’±ï¼š50
she:é’±ä¸å¤Ÿï¼Œå–ä¸äº†

Process finished with exit code 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>çº¿ç¨‹youåœ¨æ‰§è¡Œæ—¶ï¼ŒåŒæ­¥ç›‘è§†å™¨accountè¢«é”å®šï¼Œåªæœ‰çº¿ç¨‹youæ‰§è¡Œå®Œï¼Œæ‰ä¼šé‡Šæ”¾é”ï¼Œå› æ­¤åœ¨youçº¿ç¨‹æœªæ‰§è¡Œå®Œæ—¶ï¼Œçº¿ç¨‹sheæ— æ³•è®¿é—®account</font></p>
<p>  <strong>æµ‹è¯•é›†åˆæ¡ˆä¾‹ï¼šä½¿ç”¨åŒæ­¥å—</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnsafeLIst</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>
                <span class="token comment">//10000æ­¤å¾ªç¯ï¼Œæ¯æ¬¡å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå°†çº¿ç¨‹åå†™å…¥listé›†åˆï¼Œç†è®ºä¼šå†™å…¥10000ä¸ª</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//é”å®šlist</span>
                    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ç»“æœï¼š
10000

Process finished with exit code 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Lockï¼ˆé”ï¼‰"><a href="#Lockï¼ˆé”ï¼‰" class="headerlink" title="Lockï¼ˆé”ï¼‰"></a>Lockï¼ˆé”ï¼‰</h3><ul>
<li>ä»JDK5.0å¼€å§‹ï¼ŒJavaæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€”â€”-é€šè¿‡æ˜¾ç¤ºå®šä¹‰åŒæ­¥é”å¯¹è±¡æ¥å®ç°åŒæ­¥ã€‚åŒæ­¥é”ä½¿ç”¨Lockå¯¹è±¡å……å½“ã€‚</li>
<li>java.util.concurrent.locks.Lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ã€‚é”æä¾›äº†å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®ï¼Œæ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹Lockå¯¹è±¡åŠ é”ï¼Œçº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰åº”å…ˆè·å¾—Lockå¯¹è±¡ã€‚</li>
<li>ReentrantLockï¼ˆå¯é‡å…¥é”ï¼‰ç±»å®ç°äº†Lockï¼Œå®ƒæ‹¥æœ‰synchronizedåŒæ ·çš„å¹¶å‘æ€§å’Œå†…å­˜æ„ä¹‰ï¼Œåœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ§åˆ¶ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<strong>ReentrantLock</strong>ï¼Œå¯ä»¥æ˜¾å¼åŠ é”ï¼Œé‡Šæ”¾é”ã€‚</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">ç”¨æ³•ï¼š
    <span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span>
       <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ é”</span>
            <span class="token keyword">try</span><span class="token punctuation">&#123;</span>
                <span class="token comment">//ä¿è¯çº¿ç¨‹å®‰å…¨çš„ä»£ç </span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">finally</span><span class="token punctuation">&#123;</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è§£é”</span>
                <span class="token comment">//å¦‚æœåŒæ­¥ä»£ç æœ‰å¼‚å¸¸ï¼Œè¦å°†unlockï¼ˆï¼‰å†™å…¥finallyè¯­å¥å—</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>æµ‹è¯•ï¼šä½¿ç”¨locké”æ¥è§£å†³æ¡ˆä¾‹1ä¹°ç¥¨çš„çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">syn</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnsafeBuyTickets</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">BuyTicket</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BuyTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹1ï¼šå°çº¢"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹2ï¼šå°å…°"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span><span class="token string">"çº¿ç¨‹3ï¼šå°æ˜"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>   
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">BuyTicket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span>
     <span class="token comment">//ç¥¨æ•°</span>
    <span class="token keyword">int</span> ticketNums<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">//æ ‡å¿—ä½</span>
    <span class="token keyword">boolean</span> flag<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">//å®šä¹‰locké”-----------------</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//ä¹°ç¥¨</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åŠ é”--------------</span>
        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è§£é”-------------------</span>
        <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ticketNums<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//ä¹°ç¥¨</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ‹¿åˆ°äº†ç¬¬"</span><span class="token operator">+</span>ticketNums<span class="token operator">+</span><span class="token string">"ç¥¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ticketNums<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ç»“æœï¼š
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬10ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬9ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬8ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬7ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬6ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬5ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬4ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬3ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬2ç¥¨
çº¿ç¨‹1ï¼šå°çº¢æ‹¿åˆ°äº†ç¬¬1ç¥¨

Process finished with exit code 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>synchronizedä¸Lockçš„å¯¹æ¯”ï¼š</strong></p>
<ul>
<li>Lockæ˜¯æ˜¾ç¤ºé”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é—­é”ï¼‰ï¼Œsynchronizedæ˜¯éšå¼é”ï¼Œå‡ºäº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾ã€‚</li>
<li>Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronizedä»£ç å—é”ï¼ˆåŒæ­¥å—ï¼‰å’Œæ–¹æ³•é”ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰ã€‚</li>
<li>ä½¿ç”¨Locké”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šå­ç±»ï¼‰</li>
<li>ä¼˜å…ˆä½¿ç”¨é¡ºåºï¼š<ul>
<li>Lock &gt; åŒæ­¥ä»£ç å—&gt;åŒæ­¥æ–¹æ³•</li>
</ul>
</li>
</ul>
<h2 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h2><p>å¤šä¸ªçº¿ç¨‹å„è‡ªå æœ‰ä¸€äº›å…±äº«èµ„æºï¼Œå¹¶ä¸”äº’ç›¸ç­‰å¾…å…¶ä»–çº¿ç¨‹å æœ‰çš„èµ„æºæ‰èƒ½è¿è¡Œï¼Œè€Œå¯¼è‡´ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œéƒ½åœæ­¢æ‰§è¡Œçš„æƒ…å½¢ã€‚æŸä¸€ä¸ªåŒæ­¥å—åŒæ—¶æ‹¥æœ‰<font color='red'> <strong>â€œä¸¤ä¸ªä»¥ä¸Šå¯¹è±¡çš„é”â€</strong> </font>æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ­»é”ç°è±¡ã€‚</p>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">syn</span><span class="token punctuation">;</span>
<span class="token comment">//æ­»é”ï¼šå¤šä¸ªçº¿ç¨‹äº’ç›¸é”ç€å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œç„¶åå½¢æˆåƒµæŒ</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadLock</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Boy</span> boy1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"å°æ˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boy</span> boy2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"å°ç‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boy1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boy2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//ç¯®çƒ</span>
<span class="token keyword">class</span> <span class="token class-name">Basketball</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token comment">//è¶³çƒ</span>
<span class="token keyword">class</span> <span class="token class-name">Football</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">class</span> <span class="token class-name">Boy</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">&#123;</span>
   <span class="token comment">//éœ€è¦çš„èµ„æºç¯®çƒå’Œè¶³çƒåªæœ‰ä¸€ä»½ï¼Œç”¨staticæ¥ä¿è¯åªæœ‰ä¸€ä»½</span>
    <span class="token keyword">static</span> <span class="token class-name">Basketball</span> basketball<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Basketball</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Football</span> football<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Football</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//é€‰æ‹© è¦ç©çš„çƒç±»</span>
    <span class="token keyword">int</span> choice<span class="token punctuation">;</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token keyword">int</span> choice<span class="token punctuation">,</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>choice<span class="token operator">=</span>choice<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>choice<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>basketball<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//è·å¾—ç¯®çƒçš„é”</span>
               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—ç¯®çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>football<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¸€ç§’è·å¾—è¶³çƒçš„é”</span>
                   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—è¶³çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">&#125;</span>
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span>
       <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>football<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//è·å¾—è¶³çƒçš„é”</span>
               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—è¶³çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>basketball<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¸€ç§’è·å¾—ç¯®çƒçš„é”</span>
                   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—ç¯®çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">&#125;</span>
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ç»“æœï¼š
å°æ˜è·å¾—ç¯®çƒçš„é”
å°ç‹è·å¾—è¶³çƒçš„é”

------------ã€‹ã€‹ã€‹ã€‹ã€‹ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå‘ç”Ÿæ­»é”ç°è±¡ç¨‹åºå¡æ­»ï¼Œå› ä¸ºä¸Šè¿°åŒæ­¥å—ä¸­éƒ½æœ‰ä¸¤ä¸ªé”ï¼š
synchronized (basketball)&#123;&#x2F;&#x2F;è·å¾—ç¯®çƒçš„é”
               System.out.println(this.name+&quot;è·å¾—ç¯®çƒçš„é”&quot;);
               Thread.sleep(1000);
               synchronized (football)&#123;&#x2F;&#x2F;ä¸€ç§’è·å¾—è¶³çƒçš„é”
                   System.out.println(this.name+&quot;è·å¾—è¶³çƒçš„é”&quot;);
               &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>å°æ˜å…ˆè·å¾—ç¯®çƒçš„é”ï¼Œç„¶åå°ç‹åˆè·å¾—è¶³çƒçš„é”ï¼Œå°æ˜çš„ä¸‹æ­¥æ‰§è¡Œæ˜¯è¦åœ¨æœ‰ç¯®çƒçš„é”çš„æƒ…å†µä¸‹è·å¾—è¶³çƒçš„é”ï¼Œè€Œå°ç‹çš„ä¸‹æ­¥æ‰§è¡Œæ˜¯æœ‰è¶³çƒçš„é”çš„æƒ…å†µä¸‹è·å¾—ç¯®çƒçš„é”ï¼Œæ‰€ä»¥åƒµæŒä½äº†ï¼Œç¨‹åºå¡æ­»ã€‚</font></p>
<p><strong>è¦æƒ³è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œåªéœ€å°†åŒæ­¥å—ä¸­çš„ç¬¬äºŒä¸ªé”æ”¾åœ¨æ–¹æ³•å—å¤–é¢ï¼š</strong></p>
<p>å¦‚ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>choice<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>basketball<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//è·å¾—ç¯®çƒçš„é”</span>
               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—ç¯®çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">&#125;</span>
           
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>football<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¸€ç§’è·å¾—è¶³çƒçš„é”</span>
                   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—è¶³çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span>
       <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>football<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//è·å¾—è¶³çƒçš„é”</span>
               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—è¶³çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">&#125;</span>
           
           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>basketball<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//ä¸€ç§’è·å¾—ç¯®çƒçš„é”</span>
                   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">"è·å¾—ç¯®çƒçš„é”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ç»“æœï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">å°æ˜è·å¾—ç¯®çƒçš„é”
å°ç‹è·å¾—è¶³çƒçš„é”
å°æ˜è·å¾—è¶³çƒçš„é”
å°ç‹è·å¾—ç¯®çƒçš„é”

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><font color='red'>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œç¨‹åºæ­£å¸¸è¿è¡Œç»“æŸï¼šå°æ˜å…ˆè·å¾—ç¯®çƒçš„é”ï¼Œç„¶åå°ç‹åˆè·å¾—è¶³çƒçš„é”ï¼Œç„¶åå°æ˜é‡Šæ”¾ç¯®çƒçš„é”è·å¾—è¶³çƒçš„é”ï¼Œå°ç‹é‡Šæ”¾è¶³çƒçš„é”è·å¾—ç¯®çƒçš„é”ã€‚</font></p>
<h3 id="é¿å…æ­»é”çš„æ–¹æ³•"><a href="#é¿å…æ­»é”çš„æ–¹æ³•" class="headerlink" title="é¿å…æ­»é”çš„æ–¹æ³•"></a>é¿å…æ­»é”çš„æ–¹æ³•</h3><h4 id="æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š"><a href="#æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š" class="headerlink" title="æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š"></a>æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</h4><ul>
<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨</li>
<li>è¯·æ±‚å’Œä¿æŒå…³ç³»ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li>
<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨ä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li>
<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li>
</ul>
<p><font color='cornflowerblue'> ä¸Šè¿°åˆ—å‡ºäº†æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼Œæˆ‘ä»¬åªè¦æƒ³åŠæ³•ç ´å…¶ä¸­çš„ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶å°±å¯ä»¥é¿å…æ­»é”å‘ç”Ÿã€‚ </font></p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="Donate" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">ç»™ä¸ªé¥­é’±ï¼Ÿ</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/J2Sv6rVeLtAPiHx.jpg"><img loading="lazy" src="https://i.loli.net/2020/12/23/J2Sv6rVeLtAPiHx.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/4rBXF1deMD6KyN8.png"><img loading="lazy" src="https://i.loli.net/2020/12/23/4rBXF1deMD6KyN8.png" alt="QQ æ”¯ä»˜" title="QQ æ”¯ä»˜"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://i.loli.net/2020/12/23/XvirFV3o6GyRMZU.png"><img loading="lazy" src="https://i.loli.net/2020/12/23/XvirFV3o6GyRMZU.png" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Sovzn</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://sovzn.github.io/2021/03/19/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/" title="å¤šçº¿ç¨‹02">http://sovzn.github.io/2021/03/19/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/03/22/%E5%A4%9A%E7%BA%BF%E7%A8%8B03/" rel="prev" title="å¤šçº¿ç¨‹03"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">å¤šçº¿ç¨‹03</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/03/03/%E5%A4%9A%E7%BA%BF%E7%A8%8B01-%E7%BA%BF%E7%A8%8B%E6%A6%82%E8%BF%B0/" rel="next" title="å¤šçº¿ç¨‹01-çº¿ç¨‹æ¦‚è¿°"><span class="post-nav-text">å¤šçº¿ç¨‹01-çº¿ç¨‹æ¦‚è¿°</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>ç‚¹å‡»æŒ‰é’®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br><span>è‹¥æ²¡æœ‰æœ¬æ–‡ Issueï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Comment æ¨¡ç‰ˆæ–°å»ºã€‚</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+å¤šçº¿ç¨‹02">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2026 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Sovzn</span></div><div class="live_time"><span>æœ¬åšå®¢å·²è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div id="local-search-result"></div></div></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>